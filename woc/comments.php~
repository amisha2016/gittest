<?php
// Do give your Comments

require_once('code/interfaces.php');

class YourAccount implements Content
{
private $user;
	private $allow;
	private $passwordChanged;

	public function __construct($user)
	{
		$this->user = $user;
		$this->allow = !$user->IsAnonymous();
		
		$this->passwordChanged = false;
	}
	
    public function Initialize()
    {	
		if (isset($_POST['password']) && isset($_POST['newpassword']) && isset($_POST['renewpassword']))
		{
			if ($_POST['newpassword'] == $_POST['renewpassword'])
			{
				//  change user password
				$this->user->ChangePassword($this->user->GetLogin(), $_POST['password'], $_POST['renewpassword']);
				
				$this->passwordChanged = true;
			}
		}	
	}
    
    public function ShowContent()
	{
	echo '<div class="panel">';
	echo '<div>';
        if (!array_key_exists('p',$_GET))
           $signup=false;
        elseif ($_GET['p'] != 'signup')
           $signup=false;
        else $signup=true;

        if(!$signup)
          if ($this->user->IsAnonymous()) 
 {
            echo '<form action="index.php" method="post">
	    <table>
	    <tr>
	 
            <td><input type="text" name="login" id="login">
	    </tr>
            </table>
            <p>        <input type="submit" value="Log in" >
                        </form>';  
 echo '<p class="msg">Please give your feedback.Your comments are highly appreciated.';
           
}
        ?>


